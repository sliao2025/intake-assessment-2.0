{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Users/nx01/Desktop/Assessment%202.0/intake-assessment-v2/src/app/seed/assessments.ts"],"sourcesContent":["type Item = { id: string; scaleId?: string; stem: string; options: { labels: string[]; values: number[] }; params: { a: number; b: number } };\n\nenum Scale { PHQ9 = 'PHQ9', GAD7 = 'GAD7' }\n\nconst likert = { labels: ['Not at all', 'Several days', 'More than half the days', 'Nearly every day'], values: [0,1,2,3] };\n\nconst PHQ9_ITEMS: Item[] = Array.from({ length: 9 }).map((_, i) => ({\n  id: `phq9_${i+1}`,\n  scaleId: Scale.PHQ9,\n  stem: `PHQ‑9 item ${i+1}`,\n  options: likert,\n  params: { a: 1 + (i%3)*0.3, b: -1 + i*0.25 }\n}));\n\nconst GAD7_ITEMS: Item[] = Array.from({ length: 7 }).map((_, i) => ({\n  id: `gad7_${i+1}`,\n  scaleId: Scale.GAD7,\n  stem: `GAD‑7 item ${i+1}`,\n  options: likert,\n  params: { a: 1 + (i%2)*0.4, b: -0.5 + i*0.2 }\n}));\n\nexport const ASSESSMENTS: Record<string, { slug: string; title: string; items: Item[] }> = {\n  'phq-9': { slug: 'phq-9', title: 'PHQ‑9', items: PHQ9_ITEMS },\n  'gad-7': { slug: 'gad-7', title: 'GAD‑7', items: GAD7_ITEMS }\n};\n"],"names":[],"mappings":";;;;AAEA,IAAA,AAAK,+BAAA;;;WAAA;EAAA;AAEL,MAAM,SAAS;IAAE,QAAQ;QAAC;QAAc;QAAgB;QAA2B;KAAmB;IAAE,QAAQ;QAAC;QAAE;QAAE;QAAE;KAAE;AAAC;AAE1H,MAAM,aAAqB,MAAM,IAAI,CAAC;IAAE,QAAQ;AAAE,GAAG,GAAG,CAAC,CAAC,GAAG,IAAM,CAAC;QAClE,IAAI,CAAC,KAAK,EAAE,IAAE,GAAG;QACjB,OAAO;QACP,MAAM,CAAC,WAAW,EAAE,IAAE,GAAG;QACzB,SAAS;QACT,QAAQ;YAAE,GAAG,IAAI,AAAC,IAAE,IAAG;YAAK,GAAG,CAAC,IAAI,IAAE;QAAK;IAC7C,CAAC;AAED,MAAM,aAAqB,MAAM,IAAI,CAAC;IAAE,QAAQ;AAAE,GAAG,GAAG,CAAC,CAAC,GAAG,IAAM,CAAC;QAClE,IAAI,CAAC,KAAK,EAAE,IAAE,GAAG;QACjB,OAAO;QACP,MAAM,CAAC,WAAW,EAAE,IAAE,GAAG;QACzB,SAAS;QACT,QAAQ;YAAE,GAAG,IAAI,AAAC,IAAE,IAAG;YAAK,GAAG,CAAC,MAAM,IAAE;QAAI;IAC9C,CAAC;AAEM,MAAM,cAA8E;IACzF,SAAS;QAAE,MAAM;QAAS,OAAO;QAAS,OAAO;IAAW;IAC5D,SAAS;QAAE,MAAM;QAAS,OAAO;QAAS,OAAO;IAAW;AAC9D","debugId":null}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/nx01/Desktop/Assessment%202.0/intake-assessment-v2/src/app/lib/store/memory.ts"],"sourcesContent":["import { randomUUID } from \"crypto\";\nimport { ASSESSMENTS } from \"../../seed/assessments\";\n\nconst sessions = new Map<string, any>();\n\nexport const Sessions = {\n  async create(userId: string, assessmentSlug: string, scaleCode?: string) {\n    const id = randomUUID();\n    const assessment = ASSESSMENTS[assessmentSlug];\n    if (!assessment) throw new Error(\"Unknown assessment\");\n    sessions.set(id, {\n      id,\n      userId,\n      assessmentSlug,\n      scaleCode,\n      state: \"IN_PROGRESS\",\n      responses: [],\n      theta: 0,\n      seTheta: 1,\n      startedAt: Date.now(),\n    });\n    return { id };\n  },\n  async get(id: string) {\n    return sessions.get(id) ?? null;\n  },\n  async update(id: string, patch: Partial<any>) {\n    sessions.set(id, { ...sessions.get(id), ...patch });\n  },\n};\n\nexport const Assessments = {\n  async bySlug(slug: string) {\n    return ASSESSMENTS[slug] ?? null;\n  },\n};\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,MAAM,WAAW,IAAI;AAEd,MAAM,WAAW;IACtB,MAAM,QAAO,MAAc,EAAE,cAAsB,EAAE,SAAkB;QACrE,MAAM,KAAK,IAAA,mHAAU;QACrB,MAAM,aAAa,gLAAW,CAAC,eAAe;QAC9C,IAAI,CAAC,YAAY,MAAM,IAAI,MAAM;QACjC,SAAS,GAAG,CAAC,IAAI;YACf;YACA;YACA;YACA;YACA,OAAO;YACP,WAAW,EAAE;YACb,OAAO;YACP,SAAS;YACT,WAAW,KAAK,GAAG;QACrB;QACA,OAAO;YAAE;QAAG;IACd;IACA,MAAM,KAAI,EAAU;QAClB,OAAO,SAAS,GAAG,CAAC,OAAO;IAC7B;IACA,MAAM,QAAO,EAAU,EAAE,KAAmB;QAC1C,SAAS,GAAG,CAAC,IAAI;YAAE,GAAG,SAAS,GAAG,CAAC,GAAG;YAAE,GAAG,KAAK;QAAC;IACnD;AACF;AAEO,MAAM,cAAc;IACzB,MAAM,QAAO,IAAY;QACvB,OAAO,gLAAW,CAAC,KAAK,IAAI;IAC9B;AACF","debugId":null}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///Users/nx01/Desktop/Assessment%202.0/intake-assessment-v2/src/app/lib/engine.ts"],"sourcesContent":["export async function callEngineNext(payload: any) {\n  const url = process.env.NEXT_PUBLIC_ENGINE_URL || \"http://localhost:8000\";\n  const res = await fetch(url + \"/next\", {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify(payload),\n  });\n  if (!res.ok) throw new Error(\"Engine error\");\n  return res.json();\n}\n"],"names":[],"mappings":";;;;AAAO,eAAe,eAAe,OAAY;IAC/C,MAAM,MAAM,QAAQ,GAAG,CAAC,sBAAsB,IAAI;IAClD,MAAM,MAAM,MAAM,MAAM,MAAM,SAAS;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///Users/nx01/Desktop/Assessment%202.0/intake-assessment-v2/src/app/api/cat/next-item/route.ts"],"sourcesContent":["import { NextRequest } from \"next/server\";\nimport { Sessions, Assessments } from \"../../../lib/store/memory\";\nimport { callEngineNext } from \"../../../lib/engine\";\n\nexport async function GET(req: NextRequest) {\n  const url = new URL(req.url);\n  const id = url.searchParams.get(\"lookup\");\n  for (const a of Object.values(await Assessments)) {\n  }\n  // naive item lookup from fixtures\n  const all = Object.values(\n    (await import(\"../../../seed/assessments\")).ASSESSMENTS\n  ).flatMap((a: any) => a.items);\n  const item = all.find((i: any) => i.id === id);\n  return Response.json(item || null);\n}\n\nexport async function POST(req: NextRequest) {\n  const { sessionId } = await req.json();\n  const s = await Sessions.get(sessionId);\n  if (!s) return new Response(\"Not found\", { status: 404 });\n  const assessment = (await import(\"../../../seed/assessments\")).ASSESSMENTS[\n    s.assessmentSlug\n  ];\n  const payload = {\n    scaleCode: s.scaleCode,\n    theta: s.theta,\n    responses: s.responses,\n    items: assessment.items.map((it: any) => ({\n      id: it.id,\n      scaleId: it.scaleId,\n      params: it.params,\n    })),\n  };\n  const data = await callEngineNext(payload);\n  await Sessions.update(sessionId, {\n    theta: data.theta ?? s.theta,\n    seTheta: data.se ?? s.seTheta,\n    state: data.stop ? \"COMPLETED\" : \"IN_PROGRESS\",\n  });\n  return Response.json(data);\n}\n"],"names":[],"mappings":";;;;;;AACA;AACA;;;AAEO,eAAe,IAAI,GAAgB;IACxC,MAAM,MAAM,IAAI,IAAI,IAAI,GAAG;IAC3B,MAAM,KAAK,IAAI,YAAY,CAAC,GAAG,CAAC;IAChC,KAAK,MAAM,KAAK,OAAO,MAAM,CAAC,MAAM,mLAAW,EAAG,CAClD;IACA,kCAAkC;IAClC,MAAM,MAAM,OAAO,MAAM,CACvB,CAAC,kIAAyC,EAAE,WAAW,EACvD,OAAO,CAAC,CAAC,IAAW,EAAE,KAAK;IAC7B,MAAM,OAAO,IAAI,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;IAC3C,OAAO,SAAS,IAAI,CAAC,QAAQ;AAC/B;AAEO,eAAe,KAAK,GAAgB;IACzC,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,IAAI;IACpC,MAAM,IAAI,MAAM,gLAAQ,CAAC,GAAG,CAAC;IAC7B,IAAI,CAAC,GAAG,OAAO,IAAI,SAAS,aAAa;QAAE,QAAQ;IAAI;IACvD,MAAM,aAAa,CAAC,kIAAyC,EAAE,WAAW,CACxE,EAAE,cAAc,CACjB;IACD,MAAM,UAAU;QACd,WAAW,EAAE,SAAS;QACtB,OAAO,EAAE,KAAK;QACd,WAAW,EAAE,SAAS;QACtB,OAAO,WAAW,KAAK,CAAC,GAAG,CAAC,CAAC,KAAY,CAAC;gBACxC,IAAI,GAAG,EAAE;gBACT,SAAS,GAAG,OAAO;gBACnB,QAAQ,GAAG,MAAM;YACnB,CAAC;IACH;IACA,MAAM,OAAO,MAAM,IAAA,6KAAc,EAAC;IAClC,MAAM,gLAAQ,CAAC,MAAM,CAAC,WAAW;QAC/B,OAAO,KAAK,KAAK,IAAI,EAAE,KAAK;QAC5B,SAAS,KAAK,EAAE,IAAI,EAAE,OAAO;QAC7B,OAAO,KAAK,IAAI,GAAG,cAAc;IACnC;IACA,OAAO,SAAS,IAAI,CAAC;AACvB","debugId":null}}]
}